openclash 配置

如果没有安装ipset ，需要安装ipset。在gui中检查。

openclash 手动安装
github.com/vernesong/OpenClash

1、先安装依赖
#iptables
opkg update
opkg install bash iptables dnsmasq-full curl ca-bundle ipset ip-full iptables-mod-tproxy iptables-mod-extra ruby ruby-yaml kmod-tun kmod-inet-diag unzip luci-compat luci luci-base
opkg install /tmp/openclash.ipk

apk update
apk add bash iptables dnsmasq-full curl ca-bundle ipset ip-full iptables-mod-tproxy iptables-mod-extra ruby ruby-yaml kmod-tun kmod-inet-diag unzip luci-compat luci luci-base
apk add -q --force-overwrite --clean-protected --allow-untrusted /tmp/openclash.apk


下载:
https://github.com/vernesong/OpenClash/releases/download/v0.47.001/luci-app-openclash_0.47.001_all.ipk


安装openclash内核
openclash -> 插件设置  -> 版本更新

如果能翻墙，就可以自动列新内核
如果不能，则需要手动下载。
确保本机器能wall，下载后。配置管理->文件类型为meta内核心->选中上传
确保meta能显示正常的。如： alpha-g0ced98d


--------------------------------------


插件设置：
模式设置：
运行模式：Fake-IP() 混合
网络栈类型：Mixed
旁路网关（旁路由）兼容    否


流量控制：
路由本机代理 是
禁用QUIC 是
允许内网 否

DNS设置：
本地DNS劫持： 使用Dnsmasq转发
禁止Dnsmasq缓存DNS 是


GEO数据库订阅
自动更新 GeoIP MMDB 数据库    是
自动更新 GeoSite 数据库      是

大陆白名单订阅
自动更新   是

------------------------------------
覆写设置
常规设置：
DNS设置：
自定义上游 DNS 服务器  是
Fake-IP 持久化 是
Fake-IP-Filter 是   名单中的域名用真实的ip，不用fake ip


Meta 设置
*启用 TCP 并发   是
*启用流量（域名）探测     是
探测（嗅探）纯 IP 连接    是


规则设置
*自定义规则   是
